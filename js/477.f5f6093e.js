"use strict";(self["webpackChunktravel_web_app"]=self["webpackChunktravel_web_app"]||[]).push([[477],{6295:function(e,l,t){t.d(l,{Z:function(){return c}});var o=t(3396),a=t(7139);const s=["title"],i={class:"form-group-title"},n={class:"form-group-input"};function d(e,l,t,d,m,r){return(0,o.wg)(),(0,o.iD)("div",{class:"form-group",title:t.title},[(0,o._)("div",i,(0,a.zw)(t.title),1),(0,o._)("div",n,[(0,o.WI)(e.$slots,"default")])],8,s)}var m={name:"FormGroup",props:{title:{type:String}}},r=t(89);const u=(0,r.Z)(m,[["render",d]]);var c=u},7477:function(e,l,t){t.r(l),t.d(l,{default:function(){return y}});var o=t(3396);const a=["onClick"],s=(0,o._)("span",{class:"modal__title"},"Phân quyền",-1),i={class:"modal__content"},n={class:"flex-column d-flex flex1"},d={class:"flex-column d-flex flex1"},m={class:"flex-column d-flex flex1"},r={class:"modal__footer pt4 pb4"};function u(e,l,t,u,c,p){const f=(0,o.up)("v-icon"),h=(0,o.up)("b-input"),_=(0,o.up)("form-group"),v=(0,o.up)("b-autocomplete"),b=(0,o.up)("v-col"),y=(0,o.up)("v-btn"),k=(0,o.up)("vue-final-modal");return(0,o.wg)(),(0,o.j4)(k,(0,o.dG)(e.$attrs,{classes:"modal-container","content-class":"modal-content user-detail","min-width":200,height:800,modelValue:e.show,"onUpdate:modelValue":l[4]||(l[4]=l=>e.show=l),"click-to-close":!1,name:"UserDetail",onBeforeOpen:e.beforeOpen}),{default:(0,o.w5)((({close:t})=>[(0,o._)("button",{ref:"close",class:"modal__close",onClick:t},[(0,o.Wm)(f,{icon:"mdi-close"})],8,a),s,(0,o._)("div",i,[(0,o.Wm)(b,{class:"form-col"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{title:"Thông tin chung"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(h,{disabled:!0,class:"mt-2",modelValue:e.model.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.model.name=l),label:"Họ tên"},null,8,["modelValue"])]),(0,o._)("div",d,[(0,o.Wm)(h,{disabled:!0,class:"mt-2",modelValue:e.model.email,"onUpdate:modelValue":l[1]||(l[1]=l=>e.model.email=l),label:"Email"},null,8,["modelValue"])]),(0,o._)("div",m,[(0,o.Wm)(h,{disabled:!0,class:"mt-2",modelValue:e.model.tel,"onUpdate:modelValue":l[2]||(l[2]=l=>e.model.tel=l),label:"Số điện thoại"},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(_,{title:"Phân quyền"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"mt-2",returnObject:!0,items:u.roles,itemTitle:"role_title",itemValue:"role_id",modelValue:u.role,"onUpdate:modelValue":l[3]||(l[3]=e=>u.role=e),label:"Chức danh"},null,8,["items","modelValue"])])),_:1})])),_:1})]),(0,o._)("div",r,[(0,o.Wm)(y,{onClick:t,class:"modal_footer-btn"},{default:(0,o.w5)((()=>[(0,o.Uk)("Hủy")])),_:2},1032,["onClick"]),(0,o.Wm)(y,{onClick:e.save,color:"primary",class:"modal_footer-btn ml8"},{default:(0,o.w5)((()=>[(0,o.Uk)("Lưu")])),_:1},8,["onClick"])])])),_:1},16,["modelValue","onBeforeOpen"])}var c=t(4870),p=t(6295),f=t(4965),h={data(){return{show:{default:!0},model:{default:()=>{}},keyEntity:"",mode:{default:0},params:{default:()=>{}}}},methods:{beforeOpen(e){this.model={...e.ref.params.value.data},this.mode=e.ref.params.value.mode,this.params=e.ref.params.value,this.mode==this.$enums.ModelState.Edit&&this.api.getById(this.model[this.keyEntity]).then((e=>{this.model=e.data})),this.afterOpen()},afterOpen(){},async save(){let e={},l=this.$uuid.v1();switch(this.mode){case this.$enums.ModelState.Add:this.model[this.keyEntity]||(this.model[this.keyEntity]=l),e=await this.api.post({Model:this.model});break;case this.$enums.ModelState.Edit:e=await this.api.put({Model:this.model,Condition:{[this.keyEntity]:this.model[this.keyEntity]}});break}e.data&&("function"==typeof this.params.afterSave&&this.params.afterSave(),this.$toast.success("Lưu dữ liệu thành công"),this.show=!1,this.afterSave(!0),this.close())},close(){this.$refs.close&&this.$refs.close.click()},afterSave(){}}},_={name:"UserDetail",extends:h,components:{FormGroup:p.Z},setup(){const{proxy:e}=(0,o.FN)(),l=f.Z,t="user_id",a=(0,c.iH)([]),s=(0,o.Fl)({get(){return{role_title:e.model.role_title||null,role_id:e.model.role_id||null}},set(l){e.model.role_title=l.role_title,e.model.role_id=l.role_id}});(0,o.bv)((()=>{window._detail=e,console.log("UserDetail")}));const i=async()=>{l.findRoles().then((e=>{a.value=e.data}))};return{api:l,keyEntity:t,roles:a,afterOpen:i,role:s}}},v=t(89);const b=(0,v.Z)(_,[["render",u]]);var y=b}}]);
//# sourceMappingURL=477.f5f6093e.js.map